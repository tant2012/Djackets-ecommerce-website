(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c825c7d4"],{1148:function(e,t,c){"use strict";var n=c("da84"),r=c("5926"),l=c("577e"),o=c("1d80"),a=n.RangeError;e.exports=function(e){var t=l(o(this)),c="",n=r(e);if(n<0||n==1/0)throw a("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(c+=t);return c}},"408a":function(e,t,c){var n=c("e330");e.exports=n(1..valueOf)},"7cb4":function(e,t,c){"use strict";c.r(t);var n=c("1da1"),r=(c("96cf"),c("d3b7"),c("b0c0"),c("b680"),c("7a23")),l=c("751a"),o=c("4360"),a=c("a18c"),i={class:"page-checkout"},s={class:"column is-multiline"},u=Object(r["createElementVNode"])("div",{class:"column is-12"},[Object(r["createElementVNode"])("h1",{class:"title"},"Checkout")],-1),d={class:"column is-12 box"},m={key:0,class:"table is-fullwidth"},b=Object(r["createElementVNode"])("thead",null,[Object(r["createElementVNode"])("tr",null,[Object(r["createElementVNode"])("th",null,"Product"),Object(r["createElementVNode"])("th",null,"Price"),Object(r["createElementVNode"])("th",null,"Quantity"),Object(r["createElementVNode"])("th",null,"Total")])],-1),O=Object(r["createElementVNode"])("td",{colspan:"2"},"Total",-1),p={class:"column is-12 box"},j=Object(r["createElementVNode"])("h2",{class:"subtitle"},"Shipping details",-1),f=Object(r["createElementVNode"])("p",{class:"has-text-grey mb-4"},"* All fields are required",-1),h={class:"columns is-multiline"},E={class:"column is-6"},N={class:"field"},v=Object(r["createElementVNode"])("label",null,"First name*",-1),V={class:"control"},g={class:"field"},k=Object(r["createElementVNode"])("label",null,"Last name*",-1),y={class:"control"},w={class:"field"},x=Object(r["createElementVNode"])("label",null,"E-mail*",-1),T={class:"control"},B={class:"field"},D=Object(r["createElementVNode"])("label",null,"Phone*",-1),S={class:"control"},_={class:"column is-6"},M={class:"field"},z=Object(r["createElementVNode"])("label",null,"Address*",-1),C={class:"control"},P={class:"field"},q=Object(r["createElementVNode"])("label",null,"Zip code*",-1),F={class:"control"},L={class:"field"},U=Object(r["createElementVNode"])("label",null,"Place*",-1),I={class:"control"},K={key:0,class:"notification is-danger mt-4"},R=Object(r["createElementVNode"])("hr",null,null,-1),Z=Object(r["createElementVNode"])("div",{id:"card-element",class:"mb-5"},null,-1),A=Object(r["createElementVNode"])("hr",null,null,-1),J={setup:function(e){var t=Object(o["a"])(),c=Object(r["reactive"])({stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}),J=Object(r["ref"])({items:[]});Object(r["onMounted"])((function(){if(document.title="Checkout | TGHomie",J.value=t.cart,G.value>0){c.stripe=Stripe("pk_test_51Kn34eLYK7e5CI3yMMTCqZvFevruZPhSLtK0p9oVtDZwsJK8zt6Br0HNjNNOtGMNXPE8am7939XOuNK0AlvNcoOT00nzt4zfvr");var e=c.stripe.elements();c.card=e.create("card",{hidePostalCode:!0}),c.card.mount("#card-element")}}));var G=Object(r["computed"])((function(){return J.value.items.reduce((function(e,t){return e+t.quantity}),0)})),H=Object(r["computed"])((function(){return J.value.items.reduce((function(e,t){return e+t.product.price*t.quantity}),0)})),X=function(e){return e.quantity*e.product.price},$=function(){c.errors=[],""===c.first_name&&c.errors.push("The first name field is missing!"),""===c.last_name&&c.errors.push("The last name field is missing!"),""===c.email&&c.errors.push("The email field is missing!"),""===c.phone&&c.errors.push("The phone field is missing!"),""===c.address&&c.errors.push("The address field is missing!"),""===c.zipcode&&c.errors.push("The zip code field is missing!"),""===c.place&&c.errors.push("The place field is missing!"),c.errors.length||(t.setIsLoading(!0),c.stripe.createToken(c.card).then((function(e){e.error?(t.setIsLoading(!1),c.errors.push("Something went wrong with Stripe. Please try again"),console.log(e.error.message)):Q(e.token)})))},Q=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(n){var r,o,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],o=0;o<J.value.items.length;o++)i=J.value.items[o],s={product:i.product.id,quantity:i.quantity,price:i.product.price*i.quantity},r.push(s);return u={first_name:c.first_name,last_name:c.last_name,email:c.email,address:c.address,zipcode:c.zipcode,place:c.place,phone:c.phone,items:r,stripe_token:n.id},e.next=5,l["a"].post("/v1/checkout/",u).then((function(e){t.clearCart(),a["a"].push("/cart/success")})).catch((function(e){c.errors.push("Something went wrong. Please try again"),console.log(e)}));case 5:t.setIsLoading(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",i,[Object(r["createElementVNode"])("div",s,[u,Object(r["createElementVNode"])("div",d,[Object(r["unref"])(G)?(Object(r["openBlock"])(),Object(r["createElementBlock"])("table",m,[b,Object(r["createElementVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(J.value.items,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("tr",{key:e.product.id},[Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.product.name),1),Object(r["createElementVNode"])("td",null,"$"+Object(r["toDisplayString"])(e.product.price),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(e.quantity),1),Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(X(e).toFixed(2)),1)])})),128))]),Object(r["createElementVNode"])("tfoot",null,[Object(r["createElementVNode"])("tr",null,[O,Object(r["createElementVNode"])("td",null,Object(r["toDisplayString"])(Object(r["unref"])(G)),1),Object(r["createElementVNode"])("td",null,"$"+Object(r["toDisplayString"])(Object(r["unref"])(H).toFixed(2)),1)])])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",p,[j,f,Object(r["createElementVNode"])("div",h,[Object(r["createElementVNode"])("div",E,[Object(r["createElementVNode"])("div",N,[v,Object(r["createElementVNode"])("div",V,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[0]||(t[0]=function(e){return Object(r["unref"])(c).first_name=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).first_name]])])]),Object(r["createElementVNode"])("div",g,[k,Object(r["createElementVNode"])("div",y,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(r["unref"])(c).last_name=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).last_name]])])]),Object(r["createElementVNode"])("div",w,[x,Object(r["createElementVNode"])("div",T,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"email",class:"input","onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(r["unref"])(c).email=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).email]])])]),Object(r["createElementVNode"])("div",B,[D,Object(r["createElementVNode"])("div",S,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(r["unref"])(c).phone=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).phone]])])])]),Object(r["createElementVNode"])("div",_,[Object(r["createElementVNode"])("div",M,[z,Object(r["createElementVNode"])("div",C,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[4]||(t[4]=function(e){return Object(r["unref"])(c).address=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).address]])])]),Object(r["createElementVNode"])("div",P,[q,Object(r["createElementVNode"])("div",F,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[5]||(t[5]=function(e){return Object(r["unref"])(c).zipcode=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).zipcode]])])]),Object(r["createElementVNode"])("div",L,[U,Object(r["createElementVNode"])("div",I,[Object(r["withDirectives"])(Object(r["createElementVNode"])("input",{type:"text",class:"input","onUpdate:modelValue":t[6]||(t[6]=function(e){return Object(r["unref"])(c).place=e})},null,512),[[r["vModelText"],Object(r["unref"])(c).place]])])])])]),Object(r["unref"])(c).errors.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",K,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(c).errors,(function(e){return Object(r["openBlock"])(),Object(r["createElementBlock"])("p",{key:e},Object(r["toDisplayString"])(e),1)})),128))])):Object(r["createCommentVNode"])("",!0),R,Z,Object(r["unref"])(G)?(Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],{key:1},[A,Object(r["createElementVNode"])("button",{class:"button is-dark",onClick:$}," Pay with Stripe ")],64)):Object(r["createCommentVNode"])("",!0)])])])}}};const G=J;t["default"]=G},b680:function(e,t,c){"use strict";var n=c("23e7"),r=c("da84"),l=c("e330"),o=c("5926"),a=c("408a"),i=c("1148"),s=c("d039"),u=r.RangeError,d=r.String,m=Math.floor,b=l(i),O=l("".slice),p=l(1..toFixed),j=function(e,t,c){return 0===t?c:t%2===1?j(e,t-1,c*e):j(e*e,t/2,c)},f=function(e){var t=0,c=e;while(c>=4096)t+=12,c/=4096;while(c>=2)t+=1,c/=2;return t},h=function(e,t,c){var n=-1,r=c;while(++n<6)r+=t*e[n],e[n]=r%1e7,r=m(r/1e7)},E=function(e,t){var c=6,n=0;while(--c>=0)n+=e[c],e[c]=m(n/t),n=n%t*1e7},N=function(e){var t=6,c="";while(--t>=0)if(""!==c||0===t||0!==e[t]){var n=d(e[t]);c=""===c?n:c+b("0",7-n.length)+n}return c},v=s((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!s((function(){p({})}));n({target:"Number",proto:!0,forced:v},{toFixed:function(e){var t,c,n,r,l=a(this),i=o(e),s=[0,0,0,0,0,0],m="",p="0";if(i<0||i>20)throw u("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return d(l);if(l<0&&(m="-",l=-l),l>1e-21)if(t=f(l*j(2,69,1))-69,c=t<0?l*j(2,-t,1):l/j(2,t,1),c*=4503599627370496,t=52-t,t>0){h(s,0,c),n=i;while(n>=7)h(s,1e7,0),n-=7;h(s,j(10,n,1),0),n=t-1;while(n>=23)E(s,1<<23),n-=23;E(s,1<<n),h(s,1,1),E(s,2),p=N(s)}else h(s,0,c),h(s,1<<-t,0),p=N(s)+b("0",i);return i>0?(r=p.length,p=m+(r<=i?"0."+b("0",i-r)+p:O(p,0,r-i)+"."+O(p,r-i))):p=m+p,p}})}}]);
//# sourceMappingURL=chunk-c825c7d4.ea1503c0.js.map