{"remainingRequest":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Checkout.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Checkout.vue","mtime":1649701806623},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/babel.config.js","mtime":1649483312732},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js","mtime":1649534107741},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js","mtime":1649534104873}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90ZXJyZW5jZS9wbGF5Z3JvdW5kL2xlYXJuLXZ1ZS92dWUtcHJvamVjdHMvRGphY2tldHMvZGphY2tldHNfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGh0dHAgZnJvbSAiQC91dGlscy9odHRwIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHJlZiwgb25Nb3VudGVkLCBjb21wdXRlZCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAiQC9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKF9fcHJvcHMsIF9yZWYpIHsKICAgIHZhciBleHBvc2UgPSBfcmVmLmV4cG9zZTsKICAgIGV4cG9zZSgpOwogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKICAgIHZhciBidXllckRldGFpbHMgPSByZWFjdGl2ZSh7CiAgICAgIHN0cmlwZToge30sCiAgICAgIGNhcmQ6IHt9LAogICAgICBmaXJzdF9uYW1lOiAiIiwKICAgICAgbGFzdF9uYW1lOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBwaG9uZTogIiIsCiAgICAgIGFkZHJlc3M6ICIiLAogICAgICB6aXBjb2RlOiAiIiwKICAgICAgcGxhY2U6ICIiLAogICAgICBlcnJvcnM6IFtdCiAgICB9KTsKICAgIHZhciBjYXJ0ID0gcmVmKHsKICAgICAgaXRlbXM6IFtdCiAgICB9KTsKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LnRpdGxlID0gIkNoZWNrb3V0IHwgVEdIb21pZSI7CiAgICAgIGNhcnQudmFsdWUgPSBzdG9yZS5jYXJ0OwoKICAgICAgaWYgKGNhcnRUb3RhbExlbmd0aC52YWx1ZSA+IDApIHsKICAgICAgICBidXllckRldGFpbHMuc3RyaXBlID0gU3RyaXBlKCJwa190ZXN0XzUxS24zNGVMWUs3ZTVDSTN5TU1UQ3FadkZldnJ1WlBoU0x0SzBwOW9WdERad3NKSzh6dDZCcjBITmpOTk90R01OWFBFOGFtNzkzOVhPdU5LMEFsdk5jb09UMDBuenQ0emZ2ciIpOwogICAgICAgIHZhciBlbGVtZW50cyA9IGJ1eWVyRGV0YWlscy5zdHJpcGUuZWxlbWVudHMoKTsKICAgICAgICBidXllckRldGFpbHMuY2FyZCA9IGVsZW1lbnRzLmNyZWF0ZSgiY2FyZCIsIHsKICAgICAgICAgIGhpZGVQb3N0YWxDb2RlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgYnV5ZXJEZXRhaWxzLmNhcmQubW91bnQoIiNjYXJkLWVsZW1lbnQiKTsKICAgICAgfQogICAgfSk7CiAgICB2YXIgY2FydFRvdGFsTGVuZ3RoID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gY2FydC52YWx1ZS5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyVmFsKSB7CiAgICAgICAgcmV0dXJuIGFjYyArPSBjdXJWYWwucXVhbnRpdHk7CiAgICAgIH0sIDApOwogICAgfSk7CiAgICB2YXIgY2FydFRvdGFsUHJpY2UgPSBjb21wdXRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBjYXJ0LnZhbHVlLml0ZW1zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBjdXJWYWwpIHsKICAgICAgICByZXR1cm4gYWNjICs9IGN1clZhbC5wcm9kdWN0LnByaWNlICogY3VyVmFsLnF1YW50aXR5OwogICAgICB9LCAwKTsKICAgIH0pOwoKICAgIHZhciBnZXRJdGVtVG90YWwgPSBmdW5jdGlvbiBnZXRJdGVtVG90YWwoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJvZHVjdC5wcmljZTsKICAgIH07CgogICAgdmFyIHN1Ym1pdEZvcm0gPSBmdW5jdGlvbiBzdWJtaXRGb3JtKCkgewogICAgICBidXllckRldGFpbHMuZXJyb3JzID0gW107CgogICAgICBpZiAoYnV5ZXJEZXRhaWxzLmZpcnN0X25hbWUgPT09ICIiKSB7CiAgICAgICAgYnV5ZXJEZXRhaWxzLmVycm9ycy5wdXNoKCJUaGUgZmlyc3QgbmFtZSBmaWVsZCBpcyBtaXNzaW5nISIpOwogICAgICB9CgogICAgICBpZiAoYnV5ZXJEZXRhaWxzLmxhc3RfbmFtZSA9PT0gIiIpIHsKICAgICAgICBidXllckRldGFpbHMuZXJyb3JzLnB1c2goIlRoZSBsYXN0IG5hbWUgZmllbGQgaXMgbWlzc2luZyEiKTsKICAgICAgfQoKICAgICAgaWYgKGJ1eWVyRGV0YWlscy5lbWFpbCA9PT0gIiIpIHsKICAgICAgICBidXllckRldGFpbHMuZXJyb3JzLnB1c2goIlRoZSBlbWFpbCBmaWVsZCBpcyBtaXNzaW5nISIpOwogICAgICB9CgogICAgICBpZiAoYnV5ZXJEZXRhaWxzLnBob25lID09PSAiIikgewogICAgICAgIGJ1eWVyRGV0YWlscy5lcnJvcnMucHVzaCgiVGhlIHBob25lIGZpZWxkIGlzIG1pc3NpbmchIik7CiAgICAgIH0KCiAgICAgIGlmIChidXllckRldGFpbHMuYWRkcmVzcyA9PT0gIiIpIHsKICAgICAgICBidXllckRldGFpbHMuZXJyb3JzLnB1c2goIlRoZSBhZGRyZXNzIGZpZWxkIGlzIG1pc3NpbmchIik7CiAgICAgIH0KCiAgICAgIGlmIChidXllckRldGFpbHMuemlwY29kZSA9PT0gIiIpIHsKICAgICAgICBidXllckRldGFpbHMuZXJyb3JzLnB1c2goIlRoZSB6aXAgY29kZSBmaWVsZCBpcyBtaXNzaW5nISIpOwogICAgICB9CgogICAgICBpZiAoYnV5ZXJEZXRhaWxzLnBsYWNlID09PSAiIikgewogICAgICAgIGJ1eWVyRGV0YWlscy5lcnJvcnMucHVzaCgiVGhlIHBsYWNlIGZpZWxkIGlzIG1pc3NpbmchIik7CiAgICAgIH0KCiAgICAgIGlmICghYnV5ZXJEZXRhaWxzLmVycm9ycy5sZW5ndGgpIHsKICAgICAgICBzdG9yZS5zZXRJc0xvYWRpbmcodHJ1ZSk7CiAgICAgICAgYnV5ZXJEZXRhaWxzLnN0cmlwZS5jcmVhdGVUb2tlbihidXllckRldGFpbHMuY2FyZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7CiAgICAgICAgICAgIHN0b3JlLnNldElzTG9hZGluZyhmYWxzZSk7CiAgICAgICAgICAgIGJ1eWVyRGV0YWlscy5lcnJvcnMucHVzaCgiU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBTdHJpcGUuIFBsZWFzZSB0cnkgYWdhaW4iKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3RyaXBlVG9rZW5IYW5kbGVyKHJlc3VsdC50b2tlbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CgogICAgdmFyIHN0cmlwZVRva2VuSGFuZGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh0b2tlbikgewogICAgICAgIHZhciBpdGVtcywgaSwgaXRlbSwgb2JqLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGl0ZW1zID0gW107CgogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGNhcnQudmFsdWUuaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgaXRlbSA9IGNhcnQudmFsdWUuaXRlbXNbaV07CiAgICAgICAgICAgICAgICAgIG9iaiA9IHsKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OiBpdGVtLnByb2R1Y3QuaWQsCiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0ucXVhbnRpdHksCiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGl0ZW0ucHJvZHVjdC5wcmljZSAqIGl0ZW0ucXVhbnRpdHkKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChvYmopOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6IGJ1eWVyRGV0YWlscy5maXJzdF9uYW1lLAogICAgICAgICAgICAgICAgICBsYXN0X25hbWU6IGJ1eWVyRGV0YWlscy5sYXN0X25hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBidXllckRldGFpbHMuZW1haWwsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGJ1eWVyRGV0YWlscy5hZGRyZXNzLAogICAgICAgICAgICAgICAgICB6aXBjb2RlOiBidXllckRldGFpbHMuemlwY29kZSwKICAgICAgICAgICAgICAgICAgcGxhY2U6IGJ1eWVyRGV0YWlscy5wbGFjZSwKICAgICAgICAgICAgICAgICAgcGhvbmU6IGJ1eWVyRGV0YWlscy5waG9uZSwKICAgICAgICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLAogICAgICAgICAgICAgICAgICBzdHJpcGVfdG9rZW46IHRva2VuLmlkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cC5wb3N0KCIvdjEvY2hlY2tvdXQvIiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgc3RvcmUuY2xlYXJDYXJ0KCk7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKCIvY2FydC9zdWNjZXNzIik7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgYnV5ZXJEZXRhaWxzLmVycm9ycy5wdXNoKCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbiIpOwogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgc3RvcmUuc2V0SXNMb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBzdHJpcGVUb2tlbkhhbmRsZXIoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgX19yZXR1cm5lZF9fID0gewogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIGJ1eWVyRGV0YWlsczogYnV5ZXJEZXRhaWxzLAogICAgICBjYXJ0OiBjYXJ0LAogICAgICBjYXJ0VG90YWxMZW5ndGg6IGNhcnRUb3RhbExlbmd0aCwKICAgICAgY2FydFRvdGFsUHJpY2U6IGNhcnRUb3RhbFByaWNlLAogICAgICBnZXRJdGVtVG90YWw6IGdldEl0ZW1Ub3RhbCwKICAgICAgc3VibWl0Rm9ybTogc3VibWl0Rm9ybSwKICAgICAgc3RyaXBlVG9rZW5IYW5kbGVyOiBzdHJpcGVUb2tlbkhhbmRsZXIsCiAgICAgIGh0dHA6IGh0dHAsCiAgICAgIHJlYWN0aXZlOiByZWFjdGl2ZSwKICAgICAgcmVmOiByZWYsCiAgICAgIG9uTW91bnRlZDogb25Nb3VudGVkLAogICAgICBjb21wdXRlZDogY29tcHV0ZWQsCiAgICAgIHVzZVN0b3JlOiB1c2VTdG9yZSwKICAgICAgcm91dGVyOiByb3V0ZXIKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"mappings":"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","names":["http","reactive","ref","onMounted","computed","useStore","router","store","buyerDetails","stripe","card","first_name","last_name","email","phone","address","zipcode","place","errors","cart","items","document","title","value","cartTotalLength","Stripe","elements","create","hidePostalCode","mount","reduce","acc","curVal","quantity","cartTotalPrice","product","price","getItemTotal","item","submitForm","push","length","setIsLoading","createToken","then","result","error","console","log","message","stripeTokenHandler","token","i","obj","id","data","stripe_token","post","response","clearCart","catch"],"sources":["/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"page-checkout\">\n    <div class=\"column is-multiline\">\n      <div class=\"column is-12\">\n        <h1 class=\"title\">Checkout</h1>\n      </div>\n\n      <div class=\"column is-12 box\">\n        <table class=\"table is-fullwidth\" v-if=\"cartTotalLength\">\n          <thead>\n            <tr>\n              <th>Product</th>\n              <th>Price</th>\n              <th>Quantity</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <tr v-for=\"item in cart.items\" :key=\"item.product.id\">\n              <td>{{ item.product.name }}</td>\n              <td>${{ item.product.price }}</td>\n              <td>\n                {{ item.quantity }}\n              </td>\n              <td>{{ getItemTotal(item).toFixed(2) }}</td>\n            </tr>\n          </tbody>\n\n          <tfoot>\n            <tr>\n              <td colspan=\"2\">Total</td>\n              <td>{{ cartTotalLength }}</td>\n              <td>${{ cartTotalPrice.toFixed(2) }}</td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n\n      <div class=\"column is-12 box\">\n        <h2 class=\"subtitle\">Shipping details</h2>\n\n        <p class=\"has-text-grey mb-4\">* All fields are required</p>\n\n        <div class=\"columns is-multiline\">\n          <div class=\"column is-6\">\n            <div class=\"field\">\n              <label>First name*</label>\n              <div class=\"control\">\n                <input\n                  type=\"text\"\n                  class=\"input\"\n                  v-model=\"buyerDetails.first_name\"\n                />\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label>Last name*</label>\n              <div class=\"control\">\n                <input\n                  type=\"text\"\n                  class=\"input\"\n                  v-model=\"buyerDetails.last_name\"\n                />\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label>E-mail*</label>\n              <div class=\"control\">\n                <input\n                  type=\"email\"\n                  class=\"input\"\n                  v-model=\"buyerDetails.email\"\n                />\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label>Phone*</label>\n              <div class=\"control\">\n                <input type=\"text\" class=\"input\" v-model=\"buyerDetails.phone\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"column is-6\">\n            <div class=\"field\">\n              <label>Address*</label>\n              <div class=\"control\">\n                <input\n                  type=\"text\"\n                  class=\"input\"\n                  v-model=\"buyerDetails.address\"\n                />\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label>Zip code*</label>\n              <div class=\"control\">\n                <input\n                  type=\"text\"\n                  class=\"input\"\n                  v-model=\"buyerDetails.zipcode\"\n                />\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label>Place*</label>\n              <div class=\"control\">\n                <input type=\"text\" class=\"input\" v-model=\"buyerDetails.place\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"notification is-danger mt-4\"\n          v-if=\"buyerDetails.errors.length\"\n        >\n          <p v-for=\"error in buyerDetails.errors\" v-bind:key=\"error\">\n            {{ error }}\n          </p>\n        </div>\n\n        <hr />\n\n        <div id=\"card-element\" class=\"mb-5\"></div>\n\n        <template v-if=\"cartTotalLength\">\n          <hr />\n\n          <button class=\"button is-dark\" @click=\"submitForm\">\n            Pay with Stripe\n          </button>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport http from \"@/utils/http\";\nimport { reactive, ref, onMounted, computed } from \"vue\";\nimport { useStore } from \"@/store\";\nimport router from \"@/router\";\n\nconst store = useStore();\n\nconst buyerDetails = reactive({\n  stripe: {},\n  card: {},\n  first_name: \"\",\n  last_name: \"\",\n  email: \"\",\n  phone: \"\",\n  address: \"\",\n  zipcode: \"\",\n  place: \"\",\n  errors: [],\n});\nconst cart = ref({ items: [] });\n\nonMounted(() => {\n  document.title = \"Checkout | TGHomie\";\n\n  cart.value = store.cart;\n\n  if (cartTotalLength.value > 0) {\n    buyerDetails.stripe = Stripe(\n      \"pk_test_51Kn34eLYK7e5CI3yMMTCqZvFevruZPhSLtK0p9oVtDZwsJK8zt6Br0HNjNNOtGMNXPE8am7939XOuNK0AlvNcoOT00nzt4zfvr\"\n    );\n    const elements = buyerDetails.stripe.elements();\n    buyerDetails.card = elements.create(\"card\", { hidePostalCode: true });\n    buyerDetails.card.mount(\"#card-element\");\n  }\n});\n\nconst cartTotalLength = computed(() => {\n  return cart.value.items.reduce((acc, curVal) => {\n    return (acc += curVal.quantity);\n  }, 0);\n});\n\nconst cartTotalPrice = computed(() => {\n  return cart.value.items.reduce((acc, curVal) => {\n    return (acc += curVal.product.price * curVal.quantity);\n  }, 0);\n});\n\nconst getItemTotal = (item) => {\n  return item.quantity * item.product.price;\n};\n\nconst submitForm = () => {\n  buyerDetails.errors = [];\n  if (buyerDetails.first_name === \"\") {\n    buyerDetails.errors.push(\"The first name field is missing!\");\n  }\n  if (buyerDetails.last_name === \"\") {\n    buyerDetails.errors.push(\"The last name field is missing!\");\n  }\n  if (buyerDetails.email === \"\") {\n    buyerDetails.errors.push(\"The email field is missing!\");\n  }\n  if (buyerDetails.phone === \"\") {\n    buyerDetails.errors.push(\"The phone field is missing!\");\n  }\n  if (buyerDetails.address === \"\") {\n    buyerDetails.errors.push(\"The address field is missing!\");\n  }\n  if (buyerDetails.zipcode === \"\") {\n    buyerDetails.errors.push(\"The zip code field is missing!\");\n  }\n  if (buyerDetails.place === \"\") {\n    buyerDetails.errors.push(\"The place field is missing!\");\n  }\n\n  if (!buyerDetails.errors.length) {\n    store.setIsLoading(true);\n    buyerDetails.stripe.createToken(buyerDetails.card).then((result) => {\n      if (result.error) {\n        store.setIsLoading(false);\n        buyerDetails.errors.push(\n          \"Something went wrong with Stripe. Please try again\"\n        );\n        console.log(result.error.message);\n      } else {\n        stripeTokenHandler(result.token);\n      }\n    });\n  }\n};\n\nconst stripeTokenHandler = async (token) => {\n  const items = [];\n  for (let i = 0; i < cart.value.items.length; i++) {\n    const item = cart.value.items[i];\n    const obj = {\n      product: item.product.id,\n      quantity: item.quantity,\n      price: item.product.price * item.quantity,\n    };\n    items.push(obj);\n  }\n  const data = {\n    first_name: buyerDetails.first_name,\n    last_name: buyerDetails.last_name,\n    email: buyerDetails.email,\n    address: buyerDetails.address,\n    zipcode: buyerDetails.zipcode,\n    place: buyerDetails.place,\n    phone: buyerDetails.phone,\n    items: items,\n    stripe_token: token.id,\n  };\n  await http\n    .post(\"/v1/checkout/\", data)\n    .then((response) => {\n      store.clearCart();\n      router.push(\"/cart/success\");\n    })\n    .catch((error) => {\n      buyerDetails.errors.push(\"Something went wrong. Please try again\");\n      console.log(error);\n    });\n  store.setIsLoading(false);\n};\n</script>\n"]}]}