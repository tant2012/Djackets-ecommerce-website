{"remainingRequest":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/store/index.js","dependencies":[{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/store/index.js","mtime":1649608779507},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/babel.config.js","mtime":1649483312732},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js","mtime":1649534107741}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgZGVmaW5lU3RvcmUgfSBmcm9tICJwaW5pYSI7CmV4cG9ydCB2YXIgdXNlU3RvcmUgPSBkZWZpbmVTdG9yZSgiZGphY2tldHNTdG9yZSIsIHsKICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICByZXR1cm4gewogICAgICBjYXJ0OiB7CiAgICAgICAgaXRlbXM6IFtdCiAgICAgIH0sCiAgICAgIGlzQXV0aGVudGljYXRlZDogZmFsc2UsCiAgICAgIHRva2VuOiAiIiwKICAgICAgaXNMb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGdldHRlcnM6IHt9LAogIGFjdGlvbnM6IHsKICAgIGluaXRpYWxpemVTdG9yZTogZnVuY3Rpb24gaW5pdGlhbGl6ZVN0b3JlKCkgewogICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImNhcnQiKSkgewogICAgICAgIHRoaXMuY2FydCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImNhcnQiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImNhcnQiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmNhcnQpKTsKICAgICAgfQoKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpKSB7CiAgICAgICAgdGhpcy50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRva2VuID0gIiI7CiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFkZFRvQ2FydDogZnVuY3Rpb24gYWRkVG9DYXJ0KGl0ZW0pIHsKICAgICAgdmFyIGV4aXN0cyA9IHRoaXMuY2FydC5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gaS5wcm9kdWN0LmlkID09PSBpdGVtLnByb2R1Y3QuaWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKGV4aXN0cy5sZW5ndGgpIHsKICAgICAgICBleGlzdHNbMF0ucXVhbnRpdHkgPSBwYXJzZUludChleGlzdHNbMF0ucXVhbnRpdHkpICsgcGFyc2VJbnQoaXRlbS5xdWFudGl0eSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jYXJ0Lml0ZW1zLnB1c2goaXRlbSk7CiAgICAgIH0KCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjYXJ0IiwgSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJ0KSk7CiAgICB9LAogICAgc2V0SXNMb2FkaW5nOiBmdW5jdGlvbiBzZXRJc0xvYWRpbmcoc3RhdHVzKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gc3RhdHVzOwogICAgfSwKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbih0b2tlbikgewogICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgIH0sCiAgICByZW1vdmVUb2tlbjogZnVuY3Rpb24gcmVtb3ZlVG9rZW4oKSB7CiAgICAgIHRoaXMudG9rZW4gPSAiIjsKICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgIH0sCiAgICBjbGVhckNhcnQ6IGZ1bmN0aW9uIGNsZWFyQ2FydCgpIHsKICAgICAgdGhpcy5jYXJ0ID0gewogICAgICAgIGl0ZW1zOiBbXQogICAgICB9OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY2FydCIsIEpTT04uc3RyaW5naWZ5KHRoaXMuY2FydCkpOwogICAgfQogIH0KfSk7"},{"version":3,"sources":["/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/store/index.js"],"names":["defineStore","useStore","state","cart","items","isAuthenticated","token","isLoading","getters","actions","initializeStore","localStorage","getItem","JSON","parse","setItem","stringify","addToCart","item","exists","filter","i","product","id","length","quantity","parseInt","push","setIsLoading","status","setToken","removeToken","clearCart"],"mappings":";;;AAAA,SAASA,WAAT,QAA4B,OAA5B;AAEA,OAAO,IAAMC,QAAQ,GAAGD,WAAW,CAAC,eAAD,EAAkB;AACnDE,EAAAA,KAAK,EAAE;AAAA,WAAO;AACZC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE;AADH,OADM;AAIZC,MAAAA,eAAe,EAAE,KAJL;AAKZC,MAAAA,KAAK,EAAE,EALK;AAMZC,MAAAA,SAAS,EAAE;AANC,KAAP;AAAA,GAD4C;AAUnDC,EAAAA,OAAO,EAAE,EAV0C;AAYnDC,EAAAA,OAAO,EAAE;AACPC,IAAAA,eADO,6BACW;AAChB,UAAIC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAJ,EAAkC;AAChC,aAAKT,IAAL,GAAYU,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAZ;AACD,OAFD,MAEO;AACLD,QAAAA,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BF,IAAI,CAACG,SAAL,CAAe,KAAKb,IAApB,CAA7B;AACD;;AAED,UAAIQ,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AACjC,aAAKN,KAAL,GAAaK,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb;AACA,aAAKP,eAAL,GAAuB,IAAvB;AACD,OAHD,MAGO;AACL,aAAKC,KAAL,GAAa,EAAb;AACA,aAAKD,eAAL,GAAuB,KAAvB;AACD;AACF,KAfM;AAgBPY,IAAAA,SAhBO,qBAgBGC,IAhBH,EAgBS;AACd,UAAIC,MAAM,GAAG,KAAKhB,IAAL,CAAUC,KAAV,CAAgBgB,MAAhB,CACX,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,OAAF,CAAUC,EAAV,KAAiBL,IAAI,CAACI,OAAL,CAAaC,EAArC;AAAA,OADW,CAAb;;AAIA,UAAIJ,MAAM,CAACK,MAAX,EAAmB;AACjBL,QAAAA,MAAM,CAAC,CAAD,CAAN,CAAUM,QAAV,GACEC,QAAQ,CAACP,MAAM,CAAC,CAAD,CAAN,CAAUM,QAAX,CAAR,GAA+BC,QAAQ,CAACR,IAAI,CAACO,QAAN,CADzC;AAED,OAHD,MAGO;AACL,aAAKtB,IAAL,CAAUC,KAAV,CAAgBuB,IAAhB,CAAqBT,IAArB;AACD;;AACDP,MAAAA,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BF,IAAI,CAACG,SAAL,CAAe,KAAKb,IAApB,CAA7B;AACD,KA5BM;AA8BPyB,IAAAA,YA9BO,wBA8BMC,MA9BN,EA8Bc;AACnB,WAAKtB,SAAL,GAAiBsB,MAAjB;AACD,KAhCM;AAiCPC,IAAAA,QAjCO,oBAiCExB,KAjCF,EAiCS;AACd,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKD,eAAL,GAAuB,IAAvB;AACD,KApCM;AAqCP0B,IAAAA,WArCO,yBAqCO;AACZ,WAAKzB,KAAL,GAAa,EAAb;AACA,WAAKD,eAAL,GAAuB,KAAvB;AACD,KAxCM;AAyCP2B,IAAAA,SAzCO,uBAyCK;AACV,WAAK7B,IAAL,GAAY;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAZ;AAEAO,MAAAA,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6BF,IAAI,CAACG,SAAL,CAAe,KAAKb,IAApB,CAA7B;AACD;AA7CM;AAZ0C,CAAlB,CAA5B","sourcesContent":["import { defineStore } from \"pinia\";\n\nexport const useStore = defineStore(\"djacketsStore\", {\n  state: () => ({\n    cart: {\n      items: [],\n    },\n    isAuthenticated: false,\n    token: \"\",\n    isLoading: false,\n  }),\n\n  getters: {},\n\n  actions: {\n    initializeStore() {\n      if (localStorage.getItem(\"cart\")) {\n        this.cart = JSON.parse(localStorage.getItem(\"cart\"));\n      } else {\n        localStorage.setItem(\"cart\", JSON.stringify(this.cart));\n      }\n\n      if (localStorage.getItem(\"token\")) {\n        this.token = localStorage.getItem(\"token\");\n        this.isAuthenticated = true;\n      } else {\n        this.token = \"\";\n        this.isAuthenticated = false;\n      }\n    },\n    addToCart(item) {\n      let exists = this.cart.items.filter(\n        (i) => i.product.id === item.product.id\n      );\n\n      if (exists.length) {\n        exists[0].quantity =\n          parseInt(exists[0].quantity) + parseInt(item.quantity);\n      } else {\n        this.cart.items.push(item);\n      }\n      localStorage.setItem(\"cart\", JSON.stringify(this.cart));\n    },\n\n    setIsLoading(status) {\n      this.isLoading = status;\n    },\n    setToken(token) {\n      this.token = token;\n      this.isAuthenticated = true;\n    },\n    removeToken() {\n      this.token = \"\";\n      this.isAuthenticated = false;\n    },\n    clearCart() {\n      this.cart = { items: [] };\n\n      localStorage.setItem(\"cart\", JSON.stringify(this.cart));\n    },\n  },\n});\n"]}]}