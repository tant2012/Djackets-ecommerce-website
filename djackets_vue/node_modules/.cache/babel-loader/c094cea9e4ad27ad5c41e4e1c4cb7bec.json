{"remainingRequest":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Login.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Login.vue","mtime":1649701823779},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/babel.config.js","mtime":1649483312732},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js","mtime":1649534107741},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js","mtime":1649534104873}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90ZXJyZW5jZS9wbGF5Z3JvdW5kL2xlYXJuLXZ1ZS92dWUtcHJvamVjdHMvRGphY2tldHMvZGphY2tldHNfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCBodHRwIGZyb20gIkAvdXRpbHMvaHR0cCI7CmltcG9ydCB7IHJlYWN0aXZlLCBvbk1vdW50ZWQgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gIi4uL3N0b3JlIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi9yb3V0ZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKF9fcHJvcHMsIF9yZWYpIHsKICAgIHZhciBleHBvc2UgPSBfcmVmLmV4cG9zZTsKICAgIGV4cG9zZSgpOwogICAgdmFyIHVzZXJEYXRhID0gcmVhY3RpdmUoewogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgZXJyb3JzOiBbXQogICAgfSk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwoKICAgIHZhciBzdWJtaXRGb3JtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBmb3JtRGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiIjsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpOwogICAgICAgICAgICAgICAgZm9ybURhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyRGF0YS51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHVzZXJEYXRhLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cC5wb3N0KCIvdjEvdG9rZW4vbG9naW4vIiwgZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3BvbnNlLmRhdGEuYXV0aF90b2tlbjsKICAgICAgICAgICAgICAgICAgc3RvcmUuc2V0VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgICAgICBodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWyJBdXRob3JpemF0aW9uIl0gPSAiVG9rZW4gIiArIHRva2VuOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCB0b2tlbik7CiAgICAgICAgICAgICAgICAgIHZhciB0b1BhdGggPSByb3V0ZXIuY3VycmVudFJvdXRlLnZhbHVlLnF1ZXJ5LnRvIHx8ICIvY2FydCI7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHRvUGF0aCk7CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgdXNlckRhdGEuZXJyb3JzLnB1c2goIiIuY29uY2F0KHByb3BlcnR5LCAiOiAiKS5jb25jYXQoZXJyb3IucmVzcG9uc2UuZGF0YVtwcm9wZXJ0eV0pKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdXNlckRhdGEuZXJyb3JzLnB1c2goIlNvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluIik7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gc3VibWl0Rm9ybSgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBkb2N1bWVudC50aXRsZSA9ICJMb2cgaW4gfCBUR0hvbWllIjsKICAgIH0pOwogICAgdmFyIF9fcmV0dXJuZWRfXyA9IHsKICAgICAgdXNlckRhdGE6IHVzZXJEYXRhLAogICAgICBzdG9yZTogc3RvcmUsCiAgICAgIHN1Ym1pdEZvcm06IHN1Ym1pdEZvcm0sCiAgICAgIGh0dHA6IGh0dHAsCiAgICAgIHJlYWN0aXZlOiByZWFjdGl2ZSwKICAgICAgb25Nb3VudGVkOiBvbk1vdW50ZWQsCiAgICAgIHVzZVN0b3JlOiB1c2VTdG9yZSwKICAgICAgcm91dGVyOiByb3V0ZXIKICAgIH07CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX19yZXR1cm5lZF9fLCAnX19pc1NjcmlwdFNldHVwJywgewogICAgICBlbnVtZXJhYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIF9fcmV0dXJuZWRfXzsKICB9Cn07"},{"version":3,"mappings":";;;;AA6CA,OAAOA,IAAP,MAAiB,cAAjB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,KAApC;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;;;;AAEA,QAAMC,QAAQ,GAAGJ,QAAQ,CAAC;AACxBK,cAAQ,EAAE,EADc;AAExBC,cAAQ,EAAE,EAFc;AAGxBC,YAAM,EAAE;AAHgB,KAAD,CAAzB;AAMA,QAAMC,KAAK,GAAGN,QAAQ,EAAtB;;AAEA,QAAMO,UAAU;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBV,oBAAI,CAACW,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAgD,EAAhD;AACAC,4BAAY,CAACC,UAAb,CAAwB,OAAxB;AACMC,wBAHW,GAGA;AACfV,0BAAQ,EAAED,QAAQ,CAACC,QADJ;AAEfC,0BAAQ,EAAEF,QAAQ,CAACE;AAFJ,iBAHA;AAAA;AAAA,uBAOXP,IAAI,CACPiB,IADG,CACE,kBADF,EACsBD,QADtB,EAEHE,IAFG,CAEE,UAACC,QAAD,EAAc;AAClB,sBAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,UAA5B;AACAb,uBAAK,CAACc,QAAN,CAAeH,KAAf;AAEApB,sBAAI,CAACW,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAgD,WAAWO,KAA3D;AACAN,8BAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BJ,KAA9B;AACA,sBAAMK,MAAM,GAAGrB,MAAM,CAACsB,YAAP,CAAoBC,KAApB,CAA0BC,KAA1B,CAAgCC,EAAhC,IAAsC,OAArD;AACAzB,wBAAM,CAAC0B,IAAP,CAAYL,MAAZ;AACD,iBAVG,EAWHM,KAXG,CAWG,UAACC,KAAD,EAAW;AAChB,sBAAIA,KAAK,CAACb,QAAV,EAAoB;AAClB,yBAAK,IAAMc,QAAX,IAAuBD,KAAK,CAACb,QAAN,CAAeE,IAAtC,EAA4C;AAC1ChB,8BAAQ,CAACG,MAAT,CAAgBsB,IAAhB,WAAwBG,QAAxB,eAAqCD,KAAK,CAACb,QAAN,CAAeE,IAAf,CAAoBY,QAApB,CAArC;AACD;AACF,mBAJD,MAIO;AACL5B,4BAAQ,CAACG,MAAT,CAAgBsB,IAAhB,CAAqB,wCAArB;AAEAI,2BAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAZ;AACD;AACF,iBArBG,CAPW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAVtB,UAAU;AAAA;AAAA;AAAA,OAAhB;;AA+BAR,aAAS,CAAC,YAAM;AACdoC,cAAQ,CAACC,KAAT,GAAiB,kBAAjB;AACD,KAFQ,CAAT","names":["http","reactive","onMounted","useStore","router","userData","username","password","errors","store","submitForm","defaults","headers","common","localStorage","removeItem","formData","post","then","response","token","data","auth_token","setToken","setItem","toPath","currentRoute","value","query","to","push","catch","error","property","console","log","JSON","stringify","document","title"],"sources":["/Users/terrence/playground/learn-vue/vue-projects/Djackets/djackets_vue/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"page-log-in\">\n    <div class=\"columns\">\n      <div class=\"column is-4 is-offset-4\">\n        <h1 class=\"title\">Log In</h1>\n\n        <form @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>Username</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"userData.username\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <label>Password</label>\n            <div class=\"control\">\n              <input\n                type=\"password\"\n                class=\"input\"\n                v-model=\"userData.password\"\n              />\n            </div>\n          </div>\n\n          <div class=\"notification is-danger\" v-if=\"userData.errors.length\">\n            <p v-for=\"error in userData.errors\" :key=\"error\">{{ error }}</p>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\">Login</button>\n            </div>\n          </div>\n\n          <hr />\n\n          Don't have an account?\n          <router-link to=\"/sign-up\">click here </router-link>to Sign up!\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport http from \"@/utils/http\";\nimport { reactive, onMounted } from \"vue\";\nimport { useStore } from \"../store\";\nimport router from \"../router\";\n\nconst userData = reactive({\n  username: \"\",\n  password: \"\",\n  errors: [],\n});\n\nconst store = useStore();\n\nconst submitForm = async () => {\n  http.defaults.headers.common[\"Authorization\"] = \"\";\n  localStorage.removeItem(\"token\");\n  const formData = {\n    username: userData.username,\n    password: userData.password,\n  };\n  await http\n    .post(\"/v1/token/login/\", formData)\n    .then((response) => {\n      const token = response.data.auth_token;\n      store.setToken(token);\n\n      http.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n      localStorage.setItem(\"token\", token);\n      const toPath = router.currentRoute.value.query.to || \"/cart\";\n      router.push(toPath);\n    })\n    .catch((error) => {\n      if (error.response) {\n        for (const property in error.response.data) {\n          userData.errors.push(`${property}: ${error.response.data[property]}`);\n        }\n      } else {\n        userData.errors.push(\"Something went wrong. Please try again\");\n\n        console.log(JSON.stringify(error));\n      }\n    });\n};\n\nonMounted(() => {\n  document.title = \"Log in | TGHomie\";\n});\n</script>\n"]}]}