{"remainingRequest":"/Users/terrence/playground/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js!/Users/terrence/playground/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/terrence/playground/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/terrence/playground/Djackets/djackets_vue/src/views/Login.vue?vue&type=script&setup=true&lang=js","dependencies":[{"path":"/Users/terrence/playground/Djackets/djackets_vue/src/views/Login.vue","mtime":1649584611393},{"path":"/Users/terrence/playground/Djackets/djackets_vue/babel.config.js","mtime":1649483312732},{"path":"/Users/terrence/playground/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/Djackets/djackets_vue/node_modules/babel-loader/lib/index.js","mtime":1649534107741},{"path":"/Users/terrence/playground/Djackets/djackets_vue/node_modules/cache-loader/dist/cjs.js","mtime":1649534107580},{"path":"/Users/terrence/playground/Djackets/djackets_vue/node_modules/vue-loader-v16/dist/index.js","mtime":1649534104873}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90ZXJyZW5jZS9wbGF5Z3JvdW5kL0RqYWNrZXRzL2RqYWNrZXRzX3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgaHR0cCBmcm9tICJAL3V0aWxzL2h0dHAiOwppbXBvcnQgeyByZWFjdGl2ZSwgb25Nb3VudGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICIuLi9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi4vcm91dGVyIjsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChfX3Byb3BzLCBfcmVmKSB7CiAgICB2YXIgZXhwb3NlID0gX3JlZi5leHBvc2U7CiAgICBleHBvc2UoKTsKICAgIHZhciB1c2VyRGF0YSA9IHJlYWN0aXZlKHsKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIGVycm9yczogW10KICAgIH0pOwogICAgdmFyIHN0b3JlID0gdXNlU3RvcmUoKTsKCiAgICB2YXIgc3VibWl0Rm9ybSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZm9ybURhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIiI7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhID0gewogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlckRhdGEudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyRGF0YS5wYXNzd29yZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGh0dHAucG9zdCgiL3YxL3Rva2VuL2xvZ2luLyIsIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXNwb25zZS5kYXRhLmF1dGhfdG9rZW47CiAgICAgICAgICAgICAgICAgIHN0b3JlLnNldFRva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgICAgaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdID0gIlRva2VuICIgKyB0b2tlbjsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOwogICAgICAgICAgICAgICAgICB2YXIgdG9QYXRoID0gcm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZS5xdWVyeS50byB8fCAiL2NhcnQiOwogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh0b1BhdGgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIGVycm9yLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhLmVycm9ycy5wdXNoKCIiLmNvbmNhdChwcm9wZXJ0eSwgIjogIikuY29uY2F0KGVycm9yLnJlc3BvbnNlLmRhdGFbcHJvcGVydHldKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHVzZXJEYXRhLmVycm9ycy5wdXNoKCJTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2FpbiIpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGVycm9yKSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oKSB7CiAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZG9jdW1lbnQudGl0bGUgPSAiTG9nIGluIHwgRGphY2tldHMiOwogICAgfSk7CiAgICB2YXIgX19yZXR1cm5lZF9fID0gewogICAgICB1c2VyRGF0YTogdXNlckRhdGEsCiAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgc3VibWl0Rm9ybTogc3VibWl0Rm9ybSwKICAgICAgaHR0cDogaHR0cCwKICAgICAgcmVhY3RpdmU6IHJlYWN0aXZlLAogICAgICBvbk1vdW50ZWQ6IG9uTW91bnRlZCwKICAgICAgdXNlU3RvcmU6IHVzZVN0b3JlLAogICAgICByb3V0ZXI6IHJvdXRlcgogICAgfTsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfX3JldHVybmVkX18sICdfX2lzU2NyaXB0U2V0dXAnLCB7CiAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gX19yZXR1cm5lZF9fOwogIH0KfTs="},{"version":3,"mappings":";;;;AA6CA,OAAOA,IAAP,MAAiB,cAAjB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,KAApC;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;;;;AAEA,QAAMC,QAAQ,GAAGJ,QAAQ,CAAC;AACxBK,cAAQ,EAAE,EADc;AAExBC,cAAQ,EAAE,EAFc;AAGxBC,YAAM,EAAE;AAHgB,KAAD,CAAzB;AAMA,QAAMC,KAAK,GAAGN,QAAQ,EAAtB;;AAEA,QAAMO,UAAU;AAAA,0EAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBV,oBAAI,CAACW,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAgD,EAAhD;AACAC,4BAAY,CAACC,UAAb,CAAwB,OAAxB;AACMC,wBAHW,GAGA;AACfV,0BAAQ,EAAED,QAAQ,CAACC,QADJ;AAEfC,0BAAQ,EAAEF,QAAQ,CAACE;AAFJ,iBAHA;AAAA;AAAA,uBAOXP,IAAI,CACPiB,IADG,CACE,kBADF,EACsBD,QADtB,EAEHE,IAFG,CAEE,UAACC,QAAD,EAAc;AAClB,sBAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,UAA5B;AACAb,uBAAK,CAACc,QAAN,CAAeH,KAAf;AAEApB,sBAAI,CAACW,QAAL,CAAcC,OAAd,CAAsBC,MAAtB,CAA6B,eAA7B,IAAgD,WAAWO,KAA3D;AACAN,8BAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BJ,KAA9B;AACA,sBAAMK,MAAM,GAAGrB,MAAM,CAACsB,YAAP,CAAoBC,KAApB,CAA0BC,KAA1B,CAAgCC,EAAhC,IAAsC,OAArD;AACAzB,wBAAM,CAAC0B,IAAP,CAAYL,MAAZ;AACD,iBAVG,EAWHM,KAXG,CAWG,UAACC,KAAD,EAAW;AAChB,sBAAIA,KAAK,CAACb,QAAV,EAAoB;AAClB,yBAAK,IAAMc,QAAX,IAAuBD,KAAK,CAACb,QAAN,CAAeE,IAAtC,EAA4C;AAC1ChB,8BAAQ,CAACG,MAAT,CAAgBsB,IAAhB,WAAwBG,QAAxB,eAAqCD,KAAK,CAACb,QAAN,CAAeE,IAAf,CAAoBY,QAApB,CAArC;AACD;AACF,mBAJD,MAIO;AACL5B,4BAAQ,CAACG,MAAT,CAAgBsB,IAAhB,CAAqB,wCAArB;AAEAI,2BAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAZ;AACD;AACF,iBArBG,CAPW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAVtB,UAAU;AAAA;AAAA;AAAA,OAAhB;;AA+BAR,aAAS,CAAC,YAAM;AACdoC,cAAQ,CAACC,KAAT,GAAiB,mBAAjB;AACD,KAFQ,CAAT","names":["http","reactive","onMounted","useStore","router","userData","username","password","errors","store","submitForm","defaults","headers","common","localStorage","removeItem","formData","post","then","response","token","data","auth_token","setToken","setItem","toPath","currentRoute","value","query","to","push","catch","error","property","console","log","JSON","stringify","document","title"],"sources":["/Users/terrence/playground/Djackets/djackets_vue/src/views/Login.vue"],"sourcesContent":["<template>\n  <div class=\"page-log-in\">\n    <div class=\"columns\">\n      <div class=\"column is-4 is-offset-4\">\n        <h1 class=\"title\">Log In</h1>\n\n        <form @submit.prevent=\"submitForm\">\n          <div class=\"field\">\n            <label>Username</label>\n            <div class=\"control\">\n              <input type=\"text\" class=\"input\" v-model=\"userData.username\" />\n            </div>\n          </div>\n          <div class=\"field\">\n            <label>Password</label>\n            <div class=\"control\">\n              <input\n                type=\"password\"\n                class=\"input\"\n                v-model=\"userData.password\"\n              />\n            </div>\n          </div>\n\n          <div class=\"notification is-danger\" v-if=\"userData.errors.length\">\n            <p v-for=\"error in userData.errors\" :key=\"error\">{{ error }}</p>\n          </div>\n\n          <div class=\"field\">\n            <div class=\"control\">\n              <button class=\"button is-dark\">Login</button>\n            </div>\n          </div>\n\n          <hr />\n\n          Don't have an account?\n          <router-link to=\"/sign-up\">click here </router-link>to Sign up!\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport http from \"@/utils/http\";\nimport { reactive, onMounted } from \"vue\";\nimport { useStore } from \"../store\";\nimport router from \"../router\";\n\nconst userData = reactive({\n  username: \"\",\n  password: \"\",\n  errors: [],\n});\n\nconst store = useStore();\n\nconst submitForm = async () => {\n  http.defaults.headers.common[\"Authorization\"] = \"\";\n  localStorage.removeItem(\"token\");\n  const formData = {\n    username: userData.username,\n    password: userData.password,\n  };\n  await http\n    .post(\"/v1/token/login/\", formData)\n    .then((response) => {\n      const token = response.data.auth_token;\n      store.setToken(token);\n\n      http.defaults.headers.common[\"Authorization\"] = \"Token \" + token;\n      localStorage.setItem(\"token\", token);\n      const toPath = router.currentRoute.value.query.to || \"/cart\";\n      router.push(toPath);\n    })\n    .catch((error) => {\n      if (error.response) {\n        for (const property in error.response.data) {\n          userData.errors.push(`${property}: ${error.response.data[property]}`);\n        }\n      } else {\n        userData.errors.push(\"Something went wrong. Please try again\");\n\n        console.log(JSON.stringify(error));\n      }\n    });\n};\n\nonMounted(() => {\n  document.title = \"Log in | Djackets\";\n});\n</script>\n"]}]}